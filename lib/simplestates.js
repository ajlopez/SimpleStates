function State() {    var whens = { };        this.when = function (trigger, newstate) {        return this;    }}function StateMachine() {    var states = { };        this.state = function (name) {        var st = new State();        states[name] = st;        return st;    }}function createStateMachine() {    return new StateMachine();}module.exports = {    stateMachine: createStateMachine}